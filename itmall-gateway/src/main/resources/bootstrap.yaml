server:
  port: 9527


#禁用 eureka

spring:
  application:
    name: itmall-gateway
#  main:
#    allow-bean-definition-overriding: true
  cloud:
    nacos:
      username: nacos
      password: nacos
      discovery:
        server-addr: 192.168.72.139:8848
        namespace: dev-id
      config:
        server-addr: 192.168.72.139:8848 #Nacos作为配置中心地址
        file-extension: yaml #指定yaml格式的配置
        namespace: dev-id
        group: DEV_GROUP

    gateway:
      globalcors:
        # gateway 跨域设置
        cors-configurations:
          '[/**]':
            allowedOrigins: "*"
            allowedHeaders: "*"
            allowCredentials: true
            allowedMethods:
              - GET
              - POST
              - PUT
              - OPTIONS
      # 设置与服务注册发现组件结合，这样可以采用服务名的路由策略
      discovery:
        locator:
          enabled: true
      # 配置路由规则
      routes:
        - id: itmall-manage
          uri: lb://itmall-manage
          predicates:
            - Path=/itmall-manage/**
          filters:
            - StripPrefix=1
  #predicates:
    #- Method=GET
    #- Query=username, \d+  # 要有参数名username并且值还要是整数才能路由
    #- After=2020-02-05T15:10:03.685+08:00[Asia/Shanghai]         # 断言，路径相匹配的进行路由
    #- After=2021-11-16T17:11:09.905+08:00[Asia/Shanghai]         # 断言，路径相匹配的进行路由
    #- Between=2020-02-02T17:45:06.206+08:00[Asia/Shanghai],2020-03-25T18:59:06.206+08:00[Asia/Shanghai]
    #- Cookie=username,zzyy
    #- Header=X-Request-Id, \d+  # 请求头要有X-Request-Id属性并且值为整数的正则表达式
    #- Host=**.atguigu.com

